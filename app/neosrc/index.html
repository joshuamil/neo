<!doctype html>

<html lang="en">
<head>
  <title>neo</title>

  <script>
  var head = document.querySelector('head');

  function titleCase(s) {
    return s && s[0].toUpperCase() + s.slice(1);
  }

  function nameToClassName(name) {
    return name.split('-').map(titleCase).join('');
  }

  function classFromClassName(className) {
    try {
      return eval(className);
    } catch (e) {
      return undefined;
    }
  }

  var phTemplates = {};

  class PhElement extends HTMLElement {
    constructor() {
      super();

      var root = this.createShadowRoot();
      root.appendChild(this.constructor.template.content);
    }

    connectedCallback() {
    }
  }

  class PhComponents extends HTMLElement{
    constructor() {
      super();
    }

    connectedCallback() {
      this.querySelectorAll('template').forEach(function (template) {
        var tagName = template.getAttribute('name');
        if (!tagName) {
          return;
        }

        var className = nameToClassName(tagName);

        var mainScript = template.content.querySelector('script');
        if (mainScript) {
          head.appendChild(document.importNode(mainScript, true));
          template.content.removeChild(mainScript);

          var customClass = classFromClassName(className);
          customClass.tagName = tagName;
          customClass.template = document.importNode(template, true);
          customElements.define(tagName, customClass || PhElement);
        }
      });
    }
  }

  customElements.define('ph-components', PhComponents);
  </script>

  <link rel="stylesheet" href="css/nui.css">
  <link rel="stylesheet" href="css/style.css">

  <link rel="import" href="html/nui.html">
</head>

<body>
  <nui-stage>
    <nui-pane id="user_info">
      <form class="page_dialog" name="userStart">
        <p><strong>Welcome to neo!</strong></p>
        <p>Before you start writing, we need a little bit of information.</p>
        <p><label>your (real) name:</label><input type="text" name="fullName" placeholder="Anonymous"/></p>
        <p>
          <input type="radio" name="writingStyle" value="pantser" checked>&nbsp;I'm a pantser.
          <input type="radio" name="writingStyle" value="plotter">&nbsp;I'm a plotter.
        </p>
        <p><input type="checkbox" name="useAliases">&nbsp;I'll be using a pen name.</p>
        <p><input type="checkbox" name="getContact">&nbsp;I'll be submitting manuscripts.</p>
        <p><button type="submit">continue</button></p>
      </form>
    </nui-pane>
    <nui-pane id="bookcase">
      <nui-bookcase>
        <nui-shelves>
        </nui-shelves>
      </nui-bookcase>
    </nui-pane>
    <nui-pane id="story">
      <nui-gutter class="left">
        <div class="story_nav">
          <button class="icon">&#x25c0;</button>
        </div>
      </nui-gutter>
      <nui-main>
        <nui-work>
        </nui-work>
        <nui-tabs>
        </nui-tabs>
      </nui-main>
      <nui-gutter class="right">
        &nbsp;
      </nui-gutter>
    </nui-pane>
  </nui-stage>

  <nui-templates>
    <nui-shelf>
      <nui-books>
      </nui-books>
      <h2></h2>
    </nui-shelf>
    <nui-cover class="template">
      <nui-icon>&#x2295;</nui-icon>
      <h3></h3>
    </nui-cover>
    <nui-cover class="story">
      <h3></h3>
    </nui-cover>
  </nui-templates>
  <ph-templates>
  </ph-templates>
  <script src="js/main.js"></script>
</body>
</html>
